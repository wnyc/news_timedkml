<!DOCTYPE html>
<html>
<head>
  <script src="lib/jquery.min.js"></script>
  <script src="lib/jquery-ui.min.js"></script>
  <script src="lib/OpenLayers-min.js"></script>
<!script src="http://maps.google.com/maps/api/js?sensor=false"></script-->
<script src="jquery-ui.labeled-slider/jquery-ui.labeled-slider.js"></script>
  <link rel="stylesheet" href="jqueryui/jquery-ui.css" type="text/css" />
  <link rel="stylesheet" href="lib/openlayers/openlayers/theme/default/style.css" type="text/css" />
  <link rel="stylesheet" href="lib/openlayers/openlayers/theme/default/google.css" type="text/css" />
  <script>
    OpenLayers.ImgPath = 'lib/openlayers/openlayers/img/';
    OpenLayers._getScriptLocation = function() {
       return "lib/openlayers/openlayers/";
    };

  jQuery(function() {
    window.widget = new TimedKML().init({
      map:{
        center:{lat:90,lng:90},
        zoom:7
      },
      sequence:[
        {kml:'samples/1.kml',label:'1/1/11'},
        {kml:'samples/2.kml',label:'1/2/11'},
        {kml:'samples/3.kml',label:'1/3/11'}
      ]
    });

    window.map = new OpenLayers.Map({
        div: "map",
        allOverlays: true
    });
    var layers = [];
    var osm = new OpenLayers.Layer.OSM();
    layers.push(osm);
    /*
    var gmap;
    if (window.google) {
      gmap = new OpenLayers.Layer.Google("Google Streets", {visibility: false});
      layers.push(gmap);
    }*/
    var kml1 = new OpenLayers.Layer.Vector("KML", {
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "samples/1.kml",
                format: new OpenLayers.Format.KML({
                    extractStyles: true, 
                    extractAttributes: true,
                    maxDepth: 2
                })
            })
        })
    var kml2 = new OpenLayers.Layer.Vector("KML", {
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "samples/2.kml",
                format: new OpenLayers.Format.KML({
                    extractStyles: true, 
                    extractAttributes: true,
                    maxDepth: 2
                })
            })
        })
    layers.push(kml1,kml2);      
    // note that first layer must be visible
    map.addLayers(layers);

    map.addControl(new OpenLayers.Control.LayerSwitcher());
    map.zoomToMaxExtent();

    var slider = $( "#slider" ).slider({
			min: 1,
			max: 6,
			value: 1,
			slide: function( event, ui ) {
                           console.log(ui.value);
			}
		});

  });
  </script>
</head>
<body>
  <div id="slider"></div>
  <div id="map" style="width:500px;height:500px;"></div>
  <ul>
    <li>TODO
    <li>play button
    <li>date labels
    <li>
  </ul>
  <ul>
    <li>inputs
    <li>map center
    <li>map zoom level
    <li>kml file list (or dir+count)
    <li>date markers?
  </ul>
</body>
</html>
